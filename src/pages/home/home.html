<ion-header>
  <ion-navbar>
    <ion-title>
      Insulin
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="goToParametersPage()">
        <ion-icon name="options"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-card color="danger" *ngIf="!physiologicalDataService.hypoPower">
    <ion-card-content>
      Please enter your physiological data in the parameters.
      <button ion-button block color="light" icon-start (click)="goToParametersPage()">
        <ion-icon name="options"></ion-icon>
        Parameters
      </button>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      Blood glucose ({{ bloodGlucoseService.unit }})
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-input type="number" placeholder="Enter your blood glucose" clearInput [(ngModel)]="glucose" (change)="calcul()" autofocus [disabled]="!physiologicalDataService.hypoPower" step="{{bloodGlucoseService.step}}" min="{{bloodGlucoseService.min}}" max="{{bloodGlucoseService.max}}"></ion-input>
      </ion-item>
      <div class="form-errors" *ngIf="glucose && (glucose < bloodGlucoseService.min || glucose > bloodGlucoseService.max)">
        The blood glucose value must be between {{ bloodGlucoseService.min }}&nbsp;{{ bloodGlucoseService.unit }} and {{ bloodGlucoseService.max }}&nbsp;{{ bloodGlucoseService.unit }}.
      </div>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header>
      Physical activity planned
      <ion-badge item-end>{{ physicalActivities[physicalActivity].label }}</ion-badge>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-range [(ngModel)]="physicalActivity" color="danger" min="0" max="3" snaps="true" (ionChange)="calcul()"></ion-range>
      </ion-item>
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="insulinUnit || insulinUnit === 0" color="primary">
    <ion-card-header *ngIf="insulinUnit !== 0">
      Insulin to do: <b>{{ insulinUnit | insulin}}</b> units
    </ion-card-header>
    <ion-card-header *ngIf="insulinUnit === 0">
      No need of insulin
    </ion-card-header>
  </ion-card>
</ion-content>
